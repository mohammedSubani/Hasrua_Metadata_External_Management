services:
  # React Client (Frontend)
  client:
    platform: linux/amd64
    build:
      context: ./hasurarolesmanagement.client
      dockerfile: Dockerfile
      args:
        - VITE_HASURA_ENDPOINT=${HASURA_ENDPOINT:-https://hasura-test.mstart.local/v1/metadata}
        - VITE_HASURA_ADMIN_SECRET=${HASURA_ADMIN_SECRET:-myadminsecretkey}
    container_name: hasura-roles-client
    ports:
      - "3000:80"
    restart: unless-stopped
    networks:
      - hasura-roles-network

  # ASP.NET Core Server (Backend - Optional)
  # server:
  #   platform: linux/amd64
  #   build:
  #     context: .
  #     dockerfile: HasuraRolesManagement.Server/Dockerfile.linux
  #   container_name: hasura-roles-server
  #   ports:
  #     - "5000:8080"
  #     - "5001:8081"
  #   environment:
  #     - ASPNETCORE_ENVIRONMENT=Production
  #     - ASPNETCORE_URLS=http://+:8080
  #   restart: unless-stopped
  #   networks:
  #     - hasura-roles-network
    # Uncomment if you want to use the server instead of standalone client
    # depends_on:
    #   - client

networks:
  hasura-roles-network:
    driver: bridge

